

# Ch_eval_web

## Feature list:

1. 留存查询（聚合维度：渠道类型、渠道号）；
2. 真实LT计算及LT预估，LT天数灵活可配置；
3. DAU、DNU预估，可依据改善后的留存做出预估。

## Database Design

### dim_ch_dtl

| Field   | Comments |
| ------- | -------- |
| id      | 自增ID   |
| ch      | 渠道号   |
| ch_type | 渠道类型 |
| ch_name | 渠道名称 |

### ch_rete_dtl

| Field   | Comments  |
| ------- | --------- |
| id      | 自增ID    |
| pday    | 日期      |
| ch_id   | 渠道ID    |
| dnu     | 当日新增  |
| rete_d1 | 后1日留存 |
| rete_dn | 后n日留存 |



## API Design

Rete_query

## Page Design

## DAU预估

### Demo

预设留存如下表：

| 后1日留存 | 后2日留存 | 后3日留存 | 后4日留存 | 后5日留存 | 后6日留存 | 后7日留存 | 后8日留存 | 后9日留存 |
| --------- | --------- | --------- | --------- | --------- | --------- | --------- | --------- | --------- |
| 90.00%    | 80.00%    | 70.00%    | 60.00%    | 50.00%    | 40.00%    | 30.00%    | 20.00%    | 10.00%    |

如上表所示，
$$
LT=\sum_{i=1}^{n}\left ( rete_i \right )+1
$$
则最终计算出的该渠道10日LT为5.5。

预设每日DNU为100，则10日内该渠道总体情况如下表：

|        | 新增量   | 后1日留存 | 后2日留存 | 后3日留存 | 后4日留存 | 后5日留存 | 后6日留存 | 后7日留存 | 后8日留存 | 后9日留存 |
| ------ | -------- | --------- | --------- | --------- | :-------- | --------- | --------- | --------- | --------- | --------- |
| 第1日  | 100      | 90        | 80        | 70        | 60        | 50        | 40        | 30        | 20        | 10        |
| 第2日  | 100      |           | 90        | 80        | 70        | 60        | 50        | 40        | 30        | 20        |
| 第3日  | 100      |           |           | 90        | 80        | 70        | 60        | 50        | 40        | 30        |
| 第4日  | 100      |           |           |           | 90        | 80        | 70        | 60        | 50        | 40        |
| 第5日  | 100      |           |           |           |           | 90        | 80        | 70        | 60        | 50        |
| 第6日  | 100      |           |           |           |           |           | 90        | 80        | 70        | 60        |
| 第7日  | 100      |           |           |           |           |           |           | 90        | 80        | 70        |
| 第8日  | 100      |           |           |           |           |           |           |           | 90        | 80        |
| 第9日  | 100      |           |           |           |           |           |           |           |           | 90        |
| 第10日 | 100      |           |           |           |           |           |           |           |           |           |
|        | 第1日DAU | 第2日DAU  | 第3日DAU  | 第4日DAU  | 第5日DAU  | 第6日DAU  | 第7日DAU  | 第8日DAU  | 第9日DAU  | 第10日DAU |
|        | 100      | 190       | 270       | 340       | 400       | 450       | 490       | 520       | 540       | 550       |

进而得到：
$$
DAU_n=LT_n \times DNU \tag {1.1}
$$

## DNU预估

同理由式1.1反推得：
$$
DNU=DAU_n \div LT_n \tag {1.2}
$$